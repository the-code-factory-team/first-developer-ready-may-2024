{% extends "pagetemplate.html" %}

{% block content %}

    <div class="page-title">
        <h1>{% if edit%}–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–æ–π{% else %}–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏{% endif%}</h1>
    </div>

    {% if edit %}
        {% if edit['hide'] %}
            <div class="error-block">
                <p>–í–∞—à–∞ –∑–∞—è–≤–∫–∞ —Å–∫—Ä—ã—Ç–∞ –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–º! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç–µ –µ—ë –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞.</p>
            </div>
        {% endif %}
    {% endif %}

    <form action="/find_friends_actions" method="post" class="form-block" style="width: 90%">
        <label for="text">üìÑ –ù–µ–±–æ–ª—å—à–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ <font class="help-text">–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ</font><br><font class="error" style="font-size:0.8em">–ù–µ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –≤ –¥–∞–Ω–Ω–æ–º –ø–æ–ª–µ —Å–≤–æ–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, —Å—Å—ã–ª–∫–∏ –¥–ª—è —Å–≤—è–∑–∏ —Å –í–∞–º–∏ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –≤ —Ñ–æ—Ä–º–µ –Ω–∏–∂–µ.<br>–í—Å—é —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ <a class="error url-in-text" href="/account">–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∞–∫–∫–∞—É–Ω—Ç–∞</a>.</font></label>
        <textarea style="resize: none;margin-bottom: 0;height: 8vh" id="text" name="text" maxlength="300">{% if edit %}{{ edit['text'] }}{% endif %}</textarea>
        <p class="right help-text" style="margin-bottom: 1.5em;display: block" id="text-length">0 –∏–∑ 300</p>


        <label for="time_zone">üïë –ú–æ–π —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å <font class="help-text error">*</font></label>
        <select id="time_zone" name="time_zone" required>
            {% for time_zone in time_zones %}
                <option value="{{ time_zone }}" {% if edit %}{% if edit['time_zone'] == time_zone %} selected {% endif %}{% elif time_zone == 'Europe/Moscow' %}selected{% endif %}>{{ time_zone }}</option>
            {% endfor %}
        </select>

        <label for="birthday">ü•≥ –ú–æ–π –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è <font class="help-text error">*</font></label>
        <input type="date" name="birthday" id="birthday" value="{% if edit %}{{ edit['birthday'] }}{% endif %}" required/>



        <label>üéÆ –Ø –∏–≥—Ä–∞—é –≤ <font class="help-text error">*</font><br><font id="game-error-text" class="error" style="font-size:0.9em;">–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è-–±—ã –æ–¥–Ω—É –∏–≥—Ä—É!</font></label>

        <label for="dead_space_1">
            <input id="dead_space_1" type="checkbox" name="dead_space_1" {% if edit %}{% if "1" in edit['games'] %} checked {% endif %}{% endif %}/>
            Dead Space 1
        </label>

        <label for="dead_space_2">
            <input id="dead_space_2" type="checkbox" name="dead_space_2" {% if edit %}{% if "2" in edit['games'] %} checked {% endif %}{% endif %}/>
            Dead Space 2
        </label>

        <label for="dead_space_3">
            <input id="dead_space_3" type="checkbox" name="dead_space_3" {% if edit %}{% if "3" in edit['games'] %} checked {% endif %}{% endif %}/>
            Dead Space 3
        </label>

        <label for="dead_space_4" style="margin-bottom: 1.5em">
            <input id="dead_space_4" type="checkbox" name="dead_space_4" {% if edit %}{% if "4" in edit['games'] %} checked {% endif %}{% endif %}/>
            Dead Space Remake
        </label>



        <label for="games_exp">üë¥ –Ø –∏–≥—Ä–∞—é —É–∂–µ (–ª–µ—Ç) <font class="help-text error">*</font></label>
        <input id="games_exp" name="games_exp" type="number" min="0" max="50" {% if edit %}value="{{ edit['games_exp'] }}"{% endif %} required>

        {% if edit %}<input type="hidden" name="id" value="{{ edit['id'] }}"/>{% endif %}

        <button class="but but-green center" type="submit" id="submit-but" style="margin-top: 2em" disabled>–î–∞–ª–µ–µ&emsp;‚ù±</button>
        {% if edit %}<br><a class="but but-red center" href="/find_friends_actions?delete={{ edit['id'] }}">–£–¥–∞–ª–∏—Ç—å –∑–∞—è–≤–∫—É ‚ùå</a> {% endif %}
    </form>

<script>

    function checkGames() {
        if($('#dead_space_1').is(':checked') || $('#dead_space_2').is(':checked') || $('#dead_space_3').is(':checked') || $('#dead_space_4').is(':checked')) {
            $('#game-error-text').hide();
            $('#submit-but').prop('disabled', false);
        }
        else {
            $('#game-error-text').show();
            $('#submit-but').prop('disabled', true);
        }
    }

    $(document).ready(function() {
        checkGames();
        $('#text-length').text($('#text').val().length + ' –∏–∑ 300');
    });
    $('input[type=checkbox]').on('click', checkGames);

    $('#text').keydown(function() {
        $('#text-length').text($('#text').val().length + ' –∏–∑ 300');
    });
</script>

{% endblock %}