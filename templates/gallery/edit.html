{% extends 'pagetemplate.html' %}

{% block content %}

    <div class="page-title">
        <h1>{% if edit %}–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ{% else %}–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ{% endif %}</h1>
    </div>

    {% if edit %}
        {% if edit['hide'] %}
            <div class="error-block">
                <p>–í–∞—à–µ —Ñ–æ—Ç–æ —Å–∫—Ä—ã—Ç–∞ –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–º! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç–µ –µ–≥–æ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞.</p>
            </div>
        {% endif %}
    {% endif %}

    <form action="/gallery_actions" method="post" class="form-block" enctype="multipart/form-data" style="width: 90%">
        <label for="title">üìå –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ</label>
        <input id="title" type="text" name="title" placeholder="–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –∫–æ—Ä–æ—Ç–∫–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–≤–ª–µ—á—ë—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π" {% if edit %} value="{{ edit['title'] }}" {% endif %} required/>

        <label for="photo">üñºÔ∏è –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è <font class="help-text">(–º–∞–∫—Å–∏–º—É–º 10 –ú–ë)</font></label>
        {% if edit %}
            <img src="/{{ edit['photo_url'] }}"/>
        {% else %}
            <input name="photo" id="photo" type="file" required>
        {% endif %}

        <label for="description">üìÑ –û–ø–∏—Å–∞–Ω–∏–µ</label>
        <textarea style="resize: none;margin-bottom: 0;height: 8vh" id="description" name="description" maxlength="300">{% if edit %}{{ edit['description'] }}{% endif %}</textarea>
        <p class="right help-text" style="margin-bottom: 1.5em;display: block" id="text-length">0 –∏–∑ 300</p>

        {% if edit %}<input type="hidden" name="id" value="{{ edit['id'] }}"/>{% endif %}

        <button class="but but-green center" type="submit" style="margin-top: 2em">–î–∞–ª–µ–µ&emsp;‚ù±</button>
        {% if edit %}<br><a class="but but-red center" href="/gallery_actions?delete={{ edit['id'] }}">–£–¥–∞–ª–∏—Ç—å —Ñ–æ—Ç–æ ‚ùå</a> {% endif %}
    </form>


<script>
    $(document).ready(function() {
        $('#text-length').text($('#description').val().length + ' –∏–∑ 300');
    });

    $('#description').keydown(function() {
        $('#text-length').text($('#description').val().length + ' –∏–∑ 300')
    });
</script>
{% endblock %}
